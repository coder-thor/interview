# 工程概述

### 目录概述

```
|- src
    |- assets 静态资源目录
        |- reset.css 初始化全局样式的资源文件
    |- components 全局可以用的公共组件目录
        |- SearchBar 两个主页面(搜索页面/搜索结果页面)所用到的统一header组件
    |- constants 全局用到的常量
    |- hooks 全局通用自定义hooks目录
    |- pages 页面级(直接和路由挂钩)组件目录
        |- Home 搜索页面
        |- SearchResult 搜索结果页面
    |- request axios相关api以及配置页面 目录
    |- router react路由目录
    |- store redux 目录
    |- types 全局可能会用到的公用ts类型目录
```

### 用到的主要技术

- react
- react-router
- redux
- react-redux
- typescript
- lodash
- styled-component
- material-ui
- redux-thunk

**更多可见```package.json```目录**

### 基本工作流程

1. 用户访问```localhost:3000```会进入根路由, 同时任何不被react-router所记录的```path```地址都会被导航守卫拦截并进入根目录
2. 当用户在搜索框按下回车或者点击搜索按钮时, 路由将导航至搜索结果页, 同时会根据产品需求进行关键字的拼接, 并通过params带入搜索结果页面
3. 搜索结果页面会监听关键字的变化从而去触发thunk的异步action creator```$updateProductsTrendsByKeywords```
4. ```$updateProductsTrendsByKeywords```内部会去发起http请求拿到数据并更改仓库数据
5. 仓库数据的变动导致页面的重新渲染

### FAQ

1. 关于骨架屏的展示时机, 目前我选择是在echarts初始化渲染图表的时候去展示骨架屏, 而在请求数据时我会选择展示“正在加载数据...”的文案, 这样做的原因是因为在请求数据的时候前端没法得到具体本次```products_trends```会有多少条数据, 从而没法生成对应数量的骨架屏, **如果要更改这个设定, 变成在请求数据的时候展示骨架屏, 也非常简单, 只需要将“正在加载数据”的文案替换成封装好的骨架屏组件, 同时将```ProductTrendChartItem.tsx```中的骨架屏逻辑移除就好**

### 其他

1. 产品逻辑个人觉得其实有一点混乱, 本质上来说搜索页和搜索结果页应该要使用同一个路由, 不然会使得那个公用的searchBar的逻辑非常尴尬, 如果需要考量面试者对路由跳转的操控能力, 可以再追加一个详情页面, 而非将搜索和搜索结果相分离

2. 关于一些细节交代, 其实有些UI细节在产品需求上并没有提示的很清晰, 比如搜索的结果需要根据搜索关键字进行```name```字段的高亮（加粗）, 这个在UI上有显示, 但是产品诉求上并没有提出来